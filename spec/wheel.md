# 規格書：輪轉盤功能
- 移除左側選單中的使用說明，包含跳出視窗的「使用說明」跟「版本歷程」的 html、css、JS
- 移除左側選單中的輪轉盤功能，包含 html、css、JS。
- 無法確定或是有共用的項目，請勿移除，避免影響到其他服務。
- 移除完成後再參考規格書進行開發。

---

- **功能名稱**：輪轉盤 (Wheel)
- **目的**：提供一個互動式的輪盤，用於隨機選擇學生或獎懲項目，增加課堂趣味性與公平性。

---

## 1. 介面與元件 (UI/UX)

### 1.1. 觸發方式
- 在左側選單新增「🎡 輪轉盤」按鈕，為了避免畫面轉跳，在 student.html 新增一個涵蓋全畫面的 container 燈箱區塊，由 js/wheel.js 注入產生畫面，功能開發如下。

### 1.2. UI/UX

- **全螢幕燈箱**：
    - 輪轉盤以全螢幕燈箱形式顯示，覆蓋整個瀏覽器視窗。
    - 背景為半透明黑色遮罩，提供良好的視覺焦點。
    - 燈箱容器無圓角邊框，充分利用全螢幕空間。

- **關閉功能**：
    - 點擊「關閉」按鈕。
    - 按下 `ESC` 鍵。

### 1.3. 主要元件
1.  **模式切換**：
    - 「學生輪轉盤」按鈕：切換至學生選擇模式。
    - 「獎懲輪轉盤」按鈕：切換至獎懲選擇模式。
    - 當前啟用的模式按鈕會以高亮樣式顯示。

2.  **輪盤本體**：
    - **輪盤**：圓型，依照學生姓名或是獎懲內容均勻劃分多等分。
        - 桌面版尺寸：500x500px，提供良好的視覺衝擊力。
        - 手機版尺寸：350x350px，適應小螢幕顯示。
        - 從12點鐘方向開始排列扇形，確保指針指向準確。
        - 每個扇形使用獨特顏色，避免重複。
    - **指針**：位於輪盤頂部的固定指針，指向最終選中的項目。
        - 指針方向朝向輪盤內部，確保指向準確性。

3.  **佈局設計**：
    - **左側區域**：大型輪盤居中顯示，提供最佳的視覺效果。
    - **右側面板**：所有功能選項集中排列，包含控制項、已選項目列表和獎懲項目管理。
    - **響應式設計**：桌面版採用左右分欄佈局，手機版採用垂直排列佈局。

4.  **控制項**：
    - **不重複選擇 (核取方塊)**：
        - **勾選 (預設)**：轉到的項目會被記錄在「已選項目」列表中，且不會在下一次轉動中出現，直到重置為止。
        - **不勾選**：每次轉動都是從完整的名單中隨機抽取，項目可重複出現。
    - **重置已選名單 (按鈕)**：清空「已選項目」列表，並將所有項目放回輪盤中。
    - **開始轉動 (按鈕)**：啟動輪盤旋轉動畫。
    - **停止轉動**：在輪盤轉動時，點擊輪盤本體可提早停止轉動。若沒有點選輪盤本體，不要突然停止，輪盤會隨著時間慢慢停止轉動，營造刺激感。(轉動時間不要超過 5 秒，可控制速度。)

5.  **已選項目列表**：
    - 顯示已經被輪盤選中的項目。
    - 每個項目旁都有一個刪除按鈕，可將該項目從「已選」列表中移除，並使其可以再次被輪盤選中。
    - 支援滾動顯示，最大高度限制為 150px。

6.  **獎懲項目管理 (僅在「獎懲輪轉盤」模式下顯示)**：
    - **新增輸入框**：輸入新的獎懲項目文字。
    - **新增按鈕**：將輸入框中的文字加入獎懲項目列表。
    - **項目列表**：顯示所有可用的獎懲項目，每個項目旁有刪除按鈕，可永久刪除該項目。
    - 支援滾動顯示，最大高度限制為 200px。

---

## 2. 功能需求 (Functional Requirements)

### 2.1. 學生輪轉盤模式
- **FR-2.1.1**：輪盤的內容應自動載入當前所選班級的所有學生姓名。
- **FR-2.1.2**：若班級學生名單為空或只有1個，輪盤應顯示提示訊息「人數或選項不足」，且「開始轉動」按鈕應被禁用。
- **FR-2.1.3**：轉動結束後，指針指向的學生姓名應被視為選中。
- **FR-2.1.4**：若啟用「不重複選擇」，被選中的學生應加入「已選項目」列表，並從下次抽獎池中移除。
- **FR-2.1.5**：學生輪轉盤和獎懲輪轉盤的已選項目清單應分別維護，切換模式時顯示對應的已選項目。

### 2.2. 獎懲輪轉盤模式
- **FR-2.2.1**：輪盤的扇形內容應載入預設及使用者自訂的獎懲項目。
- **FR-2.2.2**：使用者可以新增自訂獎懲項目，新增後項目應立即出現在輪盤與項目列表中。
- **FR-2.2.3**：使用者可以從項目列表中刪除任何獎懲項目。
- **FR-2.2.4**：獎懲項目的變更（新增／刪除）應被儲存並在下次開啟時保留。

### 2.3. 通用功能
- **FR-2.3.1**：點擊「開始轉動」後，輪盤應以平滑的動畫效果開始旋轉，速度由快至慢，最終隨機停止。
- **FR-2.3.2**：轉動停止後，彈出視窗告知使用者選中的項目。
- **FR-2.3.3**：選中的項目被加入「已選項目」列表。
- **FR-2.3.4**：點擊「重置已選名單」按鈕後，「已選項目」列表應被清空，且所有在「不重複選擇」模式下被移除的項目應回歸抽獎池。
- **FR-2.3.5**：輪盤的每個扇形應使用獨特顏色，避免重複顯示相同顏色。
- **FR-2.3.6**：指針應準確指向12點鐘方向的扇形，選中結果與視覺指向應完全一致。
- **FR-2.3.7**：停止轉動時，選中的項目不會立即從輪盤移除，等下次開始轉動時才移除，讓用戶清楚看到選中結果。

---

## 3. 資料儲存

- **DS-3.1**：使用者自訂的獎懲項目列表儲存於瀏覽器的 `localStorage` 中。

---

## 4. 非功能性需求 (Non-Functional Requirements)

- **NFR-4.1**：介面風格應與應用程式的整體設計保持一致。
- **NFR-4.2**：輪盤在不同數量的項目下（例如 2 項或 50 項）都能正確且美觀地顯示。
- **NFR-4.3**：輪轉盤應支援全螢幕顯示，充分利用瀏覽器視窗空間。
- **NFR-4.4**：輪盤尺寸應根據裝置類型調整，桌面版 500x500px，手機版 350x350px。
- **NFR-4.5**：所有功能選項應集中在右側面板，提供清晰的操作流程。
- **NFR-4.6**：介面應支援響應式設計，在不同螢幕尺寸下都能正常顯示。
- **NFR-4.7**：已選項目列表和獎懲項目管理應支援滾動顯示，避免內容過多時影響佈局。

---

## 5. 檔案架構

 - **JS**: js/wheel.js
    - 輪轉盤核心功能模組
    - 支援學生輪轉盤和獎懲輪轉盤雙模式
    - 實作不重複選擇、已選項目管理、獎懲項目管理
    - 提供平滑旋轉動畫和結果彈窗
 - **CSS**: css/wheel.css
    - 全螢幕燈箱樣式
    - 響應式佈局設計
    - 輪盤動畫效果
    - 右側面板集中式佈局

## 6. 實作特色

### 6.1. 視覺設計
- **大型輪盤**：桌面版 500x500px，提供強烈的視覺衝擊力
- **全螢幕體驗**：無邊框燈箱設計，充分利用螢幕空間
- **獨特配色**：25種預設顏色，確保每個扇形都有獨特顏色
- **12點鐘對齊**：輪盤從12點鐘方向開始排列，指針指向準確

### 6.2. 用戶體驗
- **集中式控制**：所有功能選項集中在右側面板
- **模式獨立**：學生和獎懲模式分別維護已選項目清單
- **延遲移除**：選中項目等下次轉動時才移除，讓用戶清楚看到結果
- **響應式設計**：桌面版左右分欄，手機版垂直排列

### 6.3. 技術特色
- **模組化設計**：使用 ES6 模組化架構
- **資料持久化**：獎懲項目儲存於 localStorage
- **平滑動畫**：使用 requestAnimationFrame 實現流暢旋轉
- **事件驅動**：完整的事件監聽和處理機制